(this.webpackJsonpcards=this.webpackJsonpcards||[]).push([[0],{12:function(e,a,t){e.exports={menuList:"Navbar_menuList__YxiQ8",active:"Navbar_active__cuqUY"}},14:function(e,a,t){e.exports={headerWrapper:"Header_headerWrapper__3AKcg",headerContainer:"Header_headerContainer__38aWY",titleWrapper:"Header_titleWrapper__zgUzc",logo:"Header_logo__nLmbb"}},17:function(e,a,t){e.exports={container:"Page404_container__3uWJ8",errorNumber:"Page404_errorNumber__1IiGw",text:"Page404_text__1RMEQ"}},33:function(e,a,t){e.exports={app:"App_app__2Qw7z"}},37:function(e,a,t){e.exports=t.p+"static/media/logo.a4aedb73.png"},38:function(e,a,t){e.exports={button:"Button_button__2jq7e"}},39:function(e,a,t){e.exports={input:"Input_input__1XhFv"}},40:function(e,a,t){e.exports={pageWrapper:"SignUp_pageWrapper__2aZ7m"}},41:function(e,a,t){e.exports={pageWrapper:"Profile_pageWrapper__eLigE"}},42:function(e,a,t){e.exports={pageWrapper:"RecoverPass_pageWrapper__Ai7Uz"}},43:function(e,a,t){e.exports={pageWrapper:"ChangePass_pageWrapper__ECAJ8"}},45:function(e,a,t){e.exports=t(73)},50:function(e,a,t){},73:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(15),l=t.n(c),o=(t(50),t(33)),s=t.n(o),i=t(3),u=t(2),m=t(11),d=t(35),p=t(6),g=t(36),E=t.n(g).a.create({baseURL:"https://github.com/IgnatZakalinsky/cards-nya-back-2-0",withCredentials:!0}),b=function(e,a){return E.post("auth/register",{email:e,password:a})},f=function(e,a,t){return E.post("/auth/login",{email:e,password:a,rememberMe:t})},v=function(){return E.delete("auth/me")},h={isSendData:!1,isAddedUser:null,errorMessage:null},_=function(e){return{type:"SEND_DATA",payload:e}},O=function(e){return{type:"ADDED_USER",payload:e}},j=function(e){return{type:"SET_ERROR_MESSAGE",payload:e}},w=function(){return E.post("auth/me",{})},S="cards/profile/SET-STATUS",N="cards/signIn/SET-ERROR",y={status:"idle",error:null,isInitialized:!1},C=function(e){return{type:S,status:e}},I=function(){return function(e){e(C("loading")),w().then((function(a){a.data?(e(A(a.data)),e(W(!0)),e(C("succeeded"))):(e(W(!1)),e(C("succeeded"))),e({type:"cards/signIn/SET-USER-DATA",isInitialized:!0}),e(C("succeeded"))})).catch((function(a){e(function(e){return{type:N,error:e}}(a))}))}},R="cards/signIn/SET-USER-DATA",T={isLoggedIn:!1,error:null,userData:{_id:"",email:"",name:"",publicCardPacksCount:1,created:"null",updated:"",isAdmin:!0,verified:!0,rememberMe:!0}},W=function(e){return{type:"cards/signIn/SET-IS-LOGGED-IN",value:e}},k=function(e){return{type:"cards/signIn/SET-ERROR",error:e}},A=function(e){return{type:R,userData:e}},D={},P={},L=Object(m.c)({signUp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SEND_DATA":return Object(p.a)({},e,{isSendData:a.payload});case"ADDED_USER":return Object(p.a)({},e,{isAddedUser:a.payload});case"SET_ERROR_MESSAGE":return Object(p.a)({},e,{errorMessage:a.payload});default:return e}},signIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"cards/signIn/SET-IS-LOGGED-IN":return Object(p.a)({},e,{isLoggedIn:a.value});case"cards/signIn/SET-ERROR":return Object(p.a)({},e,{error:a.error});case R:return Object(p.a)({},e,{userData:a.userData});default:return e}},recoverPass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,a=arguments.length>1?arguments[1]:void 0;return a.type,e},changePass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,a=arguments.length>1?arguments[1]:void 0;return a.type,e},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case S:return Object(p.a)({},e,{status:a.status});case N:return Object(p.a)({},e,{error:a.error});case"cards/signIn/SET-USER-DATA":return Object(p.a)({},e,{isInitialized:a.isInitialized});default:return e}}}),U=Object(m.d)(L,Object(m.a)(d.a));window.store=U;var x=t(14),M=t.n(x),z=t(37),F=t.n(z),G=t(38),B=t.n(G),H=r.a.memo((function(e){var a=Object.assign({},e);return r.a.createElement("button",Object.assign({className:B.a.button},a),e.name)})),J=t(1),Q=t(9),Y=t(8),Z=t.n(Y),q=t(44),K=t(39),X=t.n(K),$=r.a.memo((function(e){var a=e.onEnter,t=e.error,c=Object(q.a)(e,["onEnter","error"]),l=Object(n.useCallback)((function(e){a&&"Enter"===e.key&&a()}),[a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",Object.assign({className:X.a.input},c,{onKeyPress:l})),t?r.a.createElement("span",null,t):"")})),V=r.a.memo((function(){var e=Object(u.c)((function(e){return e.signIn.isLoggedIn})),a=Object(u.b)(),t=Object(n.useState)(""),c=Object(Q.a)(t,2),l=c[0],o=c[1],s=Object(n.useState)(""),i=Object(Q.a)(s,2),m=i[0],d=i[1],p=Object(n.useState)(!1),g=Object(Q.a)(p,2),E=g[0],b=g[1],v=Object(n.useCallback)((function(e){return o(e.currentTarget.value)}),[o]),h=Object(n.useCallback)((function(e){return d(e.currentTarget.value)}),[d]),_=Object(n.useCallback)((function(e){return b(e.currentTarget.checked)}),[b]),O=Object(n.useCallback)((function(e){e.preventDefault(),a(function(e,a,t){return function(n){f(e,a,t).then((function(e){n(C("loading")),e.data?(n(W(!0)),n(A(e.data)),n(C("succeeded"))):(n(k("error")),n(C("succeeded")))})).catch((function(e){n(k(e.response?e.response.data.error:"Some error occurred"))}))}}(l,m,E))}),[l,m,E,a]);return e?r.a.createElement(J.a,{to:_e}):r.a.createElement("div",{className:Z.a.loginWrapper},r.a.createElement("div",{className:Z.a.title},r.a.createElement("h2",null,"Login")),r.a.createElement(ee,{email:l,setEmail:v,password:m,setPassword:h,rememberMe:E,setRememberMe:_,onSubmit:O}))})),ee=r.a.memo((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:Z.a.loginForm},r.a.createElement("div",null,r.a.createElement($,{placeholder:"Email",type:"email",value:e.email,onChange:e.setEmail})),r.a.createElement("div",null,r.a.createElement($,{placeholder:"Password",type:"password",value:e.password,onChange:e.setPassword})),r.a.createElement("div",{className:Z.a.recoverPassword},r.a.createElement(i.b,{to:he,activeClassName:Z.a.active},"Forgot password?")),r.a.createElement("div",{className:Z.a.rememberMe},r.a.createElement($,{type:"checkbox",name:"rememberMe",checked:e.rememberMe,onChange:e.setRememberMe}),r.a.createElement("label",null," remember me")),r.a.createElement(H,{name:"Sign in",onClick:e.onSubmit})),r.a.createElement("div",{className:Z.a.signUp},r.a.createElement("span",null,"Not registered! ",r.a.createElement(i.b,{to:ve,activeClassName:Z.a.active},"Sign up")," now.")))})),ae=V,te=t(40),ne=t.n(te),re=function(){var e=Object(u.c)((function(e){return e.signUp.isSendData})),a=Object(u.c)((function(e){return e.signUp.isAddedUser})),t=Object(u.c)((function(e){return e.signUp.errorMessage})),c=Object(u.b)(),l=Object(n.useState)(""),o=Object(Q.a)(l,2),s=o[0],i=o[1],m=Object(n.useState)(""),d=Object(Q.a)(m,2),p=d[0],g=d[1],E=Object(n.useState)(""),f=Object(Q.a)(E,2),v=f[0],h=f[1],w=Object(n.useCallback)((function(e){return i(e.currentTarget.value)}),[s]),S=Object(n.useCallback)((function(e){g(e.currentTarget.value),j("")}),[p]),N=Object(n.useCallback)((function(e){h(e.currentTarget.value),j("")}),[v]),y=p.length<7?"Password must be more than 7 characters":"Password:",C=p!==v?"incorrect password":"",I=p!==v||p.length<7&&v.length<7,R=t||"";return e?r.a.createElement("div",null,"'Wait for the end of the operation...'"):a?(setTimeout((function(){return c(O(!1))}),2e3),r.a.createElement(J.a,{to:"/login"})):r.a.createElement("div",{className:ne.a.pageWrapper},r.a.createElement("span",{style:{color:"red"}},R),r.a.createElement("div",null,r.a.createElement("label",null,"Email:"),r.a.createElement($,{type:"email",value:s,onChange:w})),r.a.createElement("div",null,r.a.createElement("label",null,y),r.a.createElement($,{type:"password",value:p,onChange:S})),r.a.createElement("div",null,r.a.createElement("label",null,"Repeat password:"),r.a.createElement("span",null,C),r.a.createElement($,{type:"password",value:v,onChange:N})),r.a.createElement("div",null,r.a.createElement(H,{disabled:I,name:"Register",onClick:function(){c(function(e,a,t){return function(n){n(_(t)),b(e,a).then((function(e){"Created"===e.statusText&&(n(_(!1)),n(O(!0)))})).catch((function(e){n(_(!1)),n(O(!1)),n(j("Register failed. Try again..."))}))}}(s,p,!0))}})))},ce=t(41),le=t.n(ce),oe=r.a.memo((function(){var e=Object(u.c)((function(e){return e.signIn.userData})),a=Object(u.c)((function(e){return e.signIn.isLoggedIn})),t=Object(u.b)();return Object(n.useEffect)((function(){e||t(I())}),[e,t]),a?(console.log(e),r.a.createElement("div",{className:le.a.pageWrapper},r.a.createElement("h2",null,"Profile"),r.a.createElement("span",null,"email: ",e.email),r.a.createElement("span",null,"email: ",e.email))):r.a.createElement(J.a,{to:fe})})),se=t(42),ie=t.n(se),ue=function(){return r.a.createElement("div",{className:ie.a.pageWrapper},"Recover password")},me=t(43),de=t.n(me),pe=function(){return r.a.createElement("div",{className:de.a.pageWrapper},"Change password")},ge=t(17),Ee=t.n(ge),be=function(){return r.a.createElement("div",{className:Ee.a.container},r.a.createElement("span",{className:Ee.a.errorNumber},"404"),r.a.createElement("span",{className:Ee.a.text},"Page not found"))},fe="/login",ve="/signUp",he="/recoverPassword",_e="/profile",Oe=function(){return r.a.createElement(J.d,null,r.a.createElement(J.b,{exact:!0,path:"/",render:function(){return r.a.createElement(J.a,{to:_e})}}),r.a.createElement(J.b,{path:fe,render:function(){return r.a.createElement(ae,null)}}),r.a.createElement(J.b,{path:ve,render:function(){return r.a.createElement(re,null)}}),r.a.createElement(J.b,{path:he,render:function(){return r.a.createElement(ue,null)}}),r.a.createElement(J.b,{path:_e,render:function(){return r.a.createElement(oe,null)}}),r.a.createElement(J.b,{path:"/changePassword",render:function(){return r.a.createElement(pe,null)}}),r.a.createElement(J.b,{path:"*",render:function(){return r.a.createElement(be,null)}}))},je=t(12),we=t.n(je),Se=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:we.a.menuList},r.a.createElement(i.b,{to:_e,activeClassName:we.a.active},"profile"),r.a.createElement(i.b,{to:ve,activeClassName:we.a.active},"sign up"),r.a.createElement(i.b,{to:he,activeClassName:we.a.active},"recover password"),r.a.createElement(i.b,{to:"/changePassword",activeClassName:we.a.active},"change password")))},Ne=r.a.memo((function(){var e=Object(u.c)((function(e){return e.signIn.isLoggedIn})),a=Object(u.b)(),t=Object(n.useCallback)((function(){a((function(e){e(C("loading")),v().then((function(a){a.data?(e(W(!1)),e(C("succeeded"))):(e(k("error")),e(C("succeeded")))}))}))}),[a]);return r.a.createElement("div",{className:M.a.headerWrapper},r.a.createElement("div",{className:M.a.headerContainer},r.a.createElement("div",{className:M.a.titleWrapper},r.a.createElement("img",{className:M.a.logo,src:F.a,alt:"logo"}),r.a.createElement("h1",null,"Cards")),r.a.createElement(Se,null),e?r.a.createElement(H,{name:"LogOut",onClick:t}):r.a.createElement(i.b,{to:fe},r.a.createElement(H,{name:"Login"}))))})),ye=function(){return r.a.createElement(i.a,{basename:"/cards"},r.a.createElement(u.a,{store:U},r.a.createElement("div",{className:s.a.app},r.a.createElement(Ne,null),r.a.createElement(Oe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,a,t){e.exports={loginWrapper:"Login_loginWrapper__yzoF1",title:"Login_title__dOAr6",loginForm:"Login_loginForm__2yZxj",recoverPassword:"Login_recoverPassword__1337n",rememberMe:"Login_rememberMe__1jBv-",signUp:"Login_signUp__26eoB"}}},[[45,1,2]]]);
//# sourceMappingURL=main.2254690f.chunk.js.map